(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8770:function(e,t,n){Promise.resolve().then(n.bind(n,7845))},7845:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(7437),a=n(2265),r=n(6463),s=n(7138),i=n(6264);function c(){let e=(0,r.useRouter)(),[t,n]=(0,a.useState)({email:"",password:""}),[c,l]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),h=async n=>{n.preventDefault(),d(!0),l("");try{let n=await i.I8.login(t);localStorage.setItem("token",n.token),e.push("/dashboard")}catch(e){l(e.message)}d(!1)};return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),c&&(0,o.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:c}),(0,o.jsxs)("form",{onSubmit:h,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 mb-2",children:"Email"}),(0,o.jsx)("input",{type:"email",value:t.email,onChange:e=>n({...t,email:e.target.value}),className:"w-full p-3 border rounded",required:!0})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 mb-2",children:"Password"}),(0,o.jsx)("input",{type:"password",value:t.password,onChange:e=>n({...t,password:e.target.value}),className:"w-full p-3 border rounded",required:!0})]}),(0,o.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 disabled:opacity-50",children:u?"Loading...":"Login"})]}),(0,o.jsxs)("p",{className:"mt-4 text-center",children:["Don't have an account? ",(0,o.jsx)(s.default,{href:"/register",className:"text-blue-600",children:"Register"})]})]})})}},6264:function(e,t,n){"use strict";n.d(t,{Ef:function(){return c},I8:function(){return r},N5:function(){return s},hi:function(){return a},lw:function(){return u},ot:function(){return l},yj:function(){return i}});let o="http://localhost:8000/api";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("token"),a={headers:{"Content-Type":"application/json",Accept:"application/json",...n&&{Authorization:"Bearer ".concat(n)},...t.headers},...t},r=await fetch("".concat(o).concat(e),a);if(401===r.status)throw localStorage.removeItem("token"),window.location.href="/login",Error("Unauthorized");let s=await r.json();if(!r.ok)throw Error(s.message||"Something went wrong");return s}let r={register:e=>a("/register",{method:"POST",body:JSON.stringify(e)}),login:e=>a("/login",{method:"POST",body:JSON.stringify(e)}),logout:()=>a("/logout",{method:"POST"}),user:()=>a("/user")},s={get:()=>a("/profile"),update:e=>a("/profile",{method:"PUT",body:JSON.stringify(e)}),uploadSignature:async e=>{let t=localStorage.getItem("token"),n=new FormData;n.append("signature",e);let a=await fetch("".concat(o,"/profile/signature"),{method:"POST",headers:{Accept:"application/json",...t&&{Authorization:"Bearer ".concat(t)}},body:n});if(!a.ok)throw Error((await a.json()).message||"Upload failed");return a.json()},deleteSignature:()=>a("/profile/signature",{method:"DELETE"})},i={list:()=>a("/clients"),get:e=>a("/clients/".concat(e)),create:e=>a("/clients",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>a("/clients/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>a("/clients/".concat(e),{method:"DELETE"})},c={list:()=>a("/invoices"),listPaginated:e=>a("/invoices?".concat(e)),get:e=>a("/invoices/".concat(e)),create:e=>a("/invoices",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>a("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>a("/invoices/".concat(e),{method:"DELETE"}),pdf:e=>"".concat(o,"/invoices/").concat(e,"/pdf?token=").concat(localStorage.getItem("token"))},l={get:e=>a("/stats?period=".concat(e))},u={list:()=>a("/activity")}},6463:function(e,t,n){"use strict";var o=n(1169);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=8770)}),_N_E=e.O()}]);