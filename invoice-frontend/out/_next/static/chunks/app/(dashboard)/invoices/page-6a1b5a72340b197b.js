(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{6804:function(e,t,s){Promise.resolve().then(s.bind(s,8248))},8248:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(7437),o=s(2265),r=s(7138),i=s(6264);function l(){let[e,t]=(0,o.useState)([]),[s,l]=(0,o.useState)([]),[a,c]=(0,o.useState)(!0),[d,h]=(0,o.useState)(1),[u,x]=(0,o.useState)(1),[m,p]=(0,o.useState)(0),[f,g]=(0,o.useState)(""),[j,v]=(0,o.useState)(""),[b,w]=(0,o.useState)("invoice_date"),[N,y]=(0,o.useState)("desc");(0,o.useEffect)(()=>{k()},[]),(0,o.useEffect)(()=>{S()},[d,f,j,b,N]);let k=async()=>{try{let e=await i.yj.list();l(e)}catch(e){}},S=async()=>{c(!0);try{let e=new URLSearchParams;e.set("page",String(d)),e.set("per_page","10"),e.set("sort_by",b),e.set("sort_dir",N),f&&e.set("month",f),j&&e.set("client_id",j);let s=await i.Ef.listPaginated(e.toString());t(s.data),x(s.last_page),p(s.total)}catch(e){}c(!1)},C=async e=>{confirm("Delete this invoice?")&&(await i.Ef.delete(e),S())},E=e=>{let t=localStorage.getItem("token");window.open("".concat("http://localhost:8000/api","/invoices/").concat(e,"/pdf?token=").concat(t),"_blank")},L=e=>{b===e?y("asc"===N?"desc":"asc"):(w(e),y("desc")),h(1)},_=()=>{h(1)},T=e=>{let{column:t}=e;return(0,n.jsx)("span",{className:"ml-1 inline-block",children:b===t?"asc"===N?(0,n.jsx)("svg",{className:"w-4 h-4 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):(0,n.jsx)("svg",{className:"w-4 h-4 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,n.jsx)("svg",{className:"w-4 h-4 inline opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})})};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Invoices"}),(0,n.jsx)("p",{className:"text-slate-400",children:"Create and manage your invoices"})]}),(0,n.jsxs)(r.default,{href:"/invoices/new",className:"px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-400 text-white hover:opacity-90",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Invoice"]})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,n.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,n.jsxs)("select",{value:f,onChange:e=>{g(e.target.value),_()},className:"w-full p-3 bg-slate-800 border border-slate-700 rounded-xl text-white focus:border-blue-500 focus:outline-none transition-colors",children:[(0,n.jsx)("option",{value:"",children:"All months"}),(()=>{let e=[],t=new Date;for(let s=0;s<12;s++){let n=new Date(t.getFullYear(),t.getMonth()-s,1),o="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0")),r=n.toLocaleDateString("en-US",{year:"numeric",month:"long"});e.push({value:o,label:r})}return e})().map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,n.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,n.jsxs)("select",{value:j,onChange:e=>{v(e.target.value),_()},className:"w-full p-3 bg-slate-800 border border-slate-700 rounded-xl text-white focus:border-blue-500 focus:outline-none transition-colors",children:[(0,n.jsx)("option",{value:"",children:"All clients"}),s.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(f||j)&&(0,n.jsx)("button",{onClick:()=>{g(""),v(""),_()},className:"px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-slate-400 hover:text-white hover:border-slate-600 transition-colors",children:"Clear filters"})]}),(0,n.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden",children:[(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-slate-800",children:[(0,n.jsxs)("th",{className:"px-6 py-4 text-left text-slate-400 text-sm font-medium cursor-pointer hover:text-white transition-colors",onClick:()=>L("number"),children:["Number ",(0,n.jsx)(T,{column:"number"})]}),(0,n.jsxs)("th",{className:"px-6 py-4 text-left text-slate-400 text-sm font-medium cursor-pointer hover:text-white transition-colors",onClick:()=>L("client_name"),children:["Client ",(0,n.jsx)(T,{column:"client_name"})]}),(0,n.jsxs)("th",{className:"px-6 py-4 text-left text-slate-400 text-sm font-medium cursor-pointer hover:text-white transition-colors",onClick:()=>L("invoice_date"),children:["Date ",(0,n.jsx)(T,{column:"invoice_date"})]}),(0,n.jsxs)("th",{className:"px-6 py-4 text-left text-slate-400 text-sm font-medium cursor-pointer hover:text-white transition-colors",onClick:()=>L("total"),children:["Total ",(0,n.jsx)(T,{column:"total"})]}),(0,n.jsx)("th",{className:"px-6 py-4 text-left text-slate-400 text-sm font-medium",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:a?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-500",children:"Loading..."})}):0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,n.jsxs)("div",{className:"text-slate-500",children:[(0,n.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,n.jsx)("p",{children:"No invoices found"}),(f||j)&&(0,n.jsx)("p",{className:"text-sm mt-1",children:"Try changing the filters"})]})})}):e.map(e=>{var t,s;return(0,n.jsxs)("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50 transition-colors",children:[(0,n.jsxs)("td",{className:"px-6 py-4 text-white font-medium",children:[e.series," ",e.number]}),(0,n.jsx)("td",{className:"px-6 py-4 text-slate-300",children:null===(t=e.client)||void 0===t?void 0:t.name}),(0,n.jsx)("td",{className:"px-6 py-4 text-slate-300",children:null===(s=e.invoice_date)||void 0===s?void 0:s.split("T")[0]}),(0,n.jsxs)("td",{className:"px-6 py-4 text-white font-medium",children:[e.total," EUR"]}),(0,n.jsxs)("td",{className:"px-6 py-4",children:[(0,n.jsx)("button",{onClick:()=>E(e.id),className:"text-green-400 hover:text-green-300 mr-4 transition-colors",children:"PDF"}),(0,n.jsx)(r.default,{href:"/invoices/edit?id=".concat(e.id),className:"text-blue-400 hover:text-blue-300 mr-4 transition-colors",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>C(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"Delete"})]})]},e.id)})})]}),u>1&&(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-800",children:[(0,n.jsxs)("div",{className:"text-slate-400 text-sm",children:["Showing ",e.length," of ",m," invoices"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===d,className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,u)},(e,t)=>{let s;return s=u<=5?t+1:d<=3?t+1:d>=u-2?u-4+t:d-2+t,(0,n.jsx)("button",{onClick:()=>h(s),className:"w-10 h-10 rounded-lg font-medium transition-colors ".concat(d===s?"bg-blue-500 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"),children:s},s)})}),(0,n.jsx)("button",{onClick:()=>h(e=>Math.min(u,e+1)),disabled:d===u,className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})}},6264:function(e,t,s){"use strict";s.d(t,{Ef:function(){return a},I8:function(){return r},N5:function(){return i},hi:function(){return o},lw:function(){return d},ot:function(){return c},yj:function(){return l}});let n="http://localhost:8000/api";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("token"),o={headers:{"Content-Type":"application/json",Accept:"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...t},r=await fetch("".concat(n).concat(e),o);if(401===r.status)throw localStorage.removeItem("token"),window.location.href="/login",Error("Unauthorized");let i=await r.json();if(!r.ok)throw Error(i.message||"Something went wrong");return i}let r={register:e=>o("/register",{method:"POST",body:JSON.stringify(e)}),login:e=>o("/login",{method:"POST",body:JSON.stringify(e)}),logout:()=>o("/logout",{method:"POST"}),user:()=>o("/user")},i={get:()=>o("/profile"),update:e=>o("/profile",{method:"PUT",body:JSON.stringify(e)}),uploadSignature:async e=>{let t=localStorage.getItem("token"),s=new FormData;s.append("signature",e);let o=await fetch("".concat(n,"/profile/signature"),{method:"POST",headers:{Accept:"application/json",...t&&{Authorization:"Bearer ".concat(t)}},body:s});if(!o.ok)throw Error((await o.json()).message||"Upload failed");return o.json()},deleteSignature:()=>o("/profile/signature",{method:"DELETE"})},l={list:()=>o("/clients"),get:e=>o("/clients/".concat(e)),create:e=>o("/clients",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/clients/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/clients/".concat(e),{method:"DELETE"})},a={list:()=>o("/invoices"),listPaginated:e=>o("/invoices?".concat(e)),get:e=>o("/invoices/".concat(e)),create:e=>o("/invoices",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/invoices/".concat(e),{method:"DELETE"}),pdf:e=>"".concat(n,"/invoices/").concat(e,"/pdf?token=").concat(localStorage.getItem("token"))},c={get:e=>o("/stats?period=".concat(e))},d={list:()=>o("/activity")}}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=6804)}),_N_E=e.O()}]);